import{j as e,W as w,r as m,Y as j,a as h}from"./app-BgAMWFci.js";import{G as b}from"./GuestLayout-B2fBZHKk.js";import{P as y}from"./PrimaryButton-DNG7cC9l.js";import{T as v,I as E}from"./TextInput-Dcu8VNHF.js";import{I}from"./InputLabel-643L_3oW.js";import{u as N}from"./transition-PdgWZ5ow.js";import"./NavigationButton-DTpIQWHe.js";const C=({message:r})=>r?e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[e.jsx("strong",{className:"font-bold",children:"入力エラー"}),e.jsx("br",{}),e.jsx("span",{className:"block sm:inline",children:r})]}):null,D=C,_=({id:r,label:a,type:t="text",value:d,onChange:c,error:s})=>e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{htmlFor:r,value:a}),e.jsx(v,{id:r,type:t,name:r,value:d,className:"mt-1 block w-full",autoComplete:t==="password"?"new-password":"username",onChange:c,required:!0}),e.jsx(E,{message:s,className:"mt-2"})]}),l=_;function P(){const{t:r}=N(),{data:a,setData:t,post:d,processing:c,errors:s,reset:p}=w({name:"",email:"",password:"",password_confirmation:""}),[g,u]=m.useState("");m.useEffect(()=>{const o=sessionStorage.getItem("registerData");if(o){const n=JSON.parse(o);t(i=>({...i,...n})),sessionStorage.removeItem("registerData")}},[]),m.useEffect(()=>()=>{p("password","password_confirmation")},[]),m.useEffect(()=>{s.name?document.getElementById("name").focus():s.email?document.getElementById("email").focus():s.password?document.getElementById("password").focus():s.password_confirmation&&document.getElementById("password_confirmation").focus(),Object.keys(s).length>0?u("入力内容にエラーがあります。修正してください。"):u("")},[s]);const x=o=>{o.preventDefault(),d(route("register.confirm"),a,{preserveState:!0,onSuccess:n=>{n.component==="Auth/RegisterConfirm"&&(window.location.href=n.url)},onError:()=>{var i;u("登録に失敗しました。以下のエラーを修正してください。"),Object.keys(s).forEach(f=>{t(f,a[f],{error:s[f]})});const n=Object.keys(s)[0];n&&((i=document.getElementById(n))==null||i.focus())}})};return e.jsxs(b,{children:[e.jsx(j,{title:r("Register")}),e.jsx("div",{className:"w-full sm:max-w-md mx-auto mt-10 px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg",children:e.jsxs("form",{onSubmit:x,children:[e.jsx(D,{message:g}),e.jsx(l,{id:"name",label:r("Name"),value:a.name,onChange:o=>t("name",o.target.value),error:s.name}),e.jsx(l,{id:"email",label:r("Email"),type:"email",value:a.email,onChange:o=>t("email",o.target.value),error:s.email}),e.jsx(l,{id:"password",label:"パスワード(半角英数8文字以上)",type:"password",value:a.password,onChange:o=>t("password",o.target.value),error:s.password}),e.jsx(l,{id:"password_confirmation",label:r("Confirm Password"),type:"password",value:a.password_confirmation,onChange:o=>t("password_confirmation",o.target.value),error:s.password_confirmation}),e.jsxs("div",{className:"flex items-center justify-end mt-4",children:[e.jsx(h,{href:route("login"),className:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:r("Already registered?")}),e.jsx(y,{className:"ms-4",disabled:c,children:r("Confirm")})]})]})})]})}export{P as default};
